type PaymentIntent {
  clientSecret: String!,
  id: String!
}

type Mutation {
  createPaymentIntent(amount: Int!, email: String!, jobID: String!): PaymentIntent! @function(name: "CreatePaymentIntent-${env}")
  refundPayment(isCancel: Boolean!, jobID: String!): Boolean! @function(name: "RefundPayment-${env}")
}

enum JOBSTATUS {
  REQUESTED
  ACCEPTED
  IN_SERVICE
  COMPLETED
}

type Job @model @auth(rules: [{allow: public}]) {
  id: ID!
  jobTitle: String!
  jobDescription: String
  address: String!
  city: String!
  zipCode: String!
  duration: Int!
  requestDateTime: String!
  backupProviders: [String!]
  checkInTime: String
  checkOutTime: String
  currentStatus: JOBSTATUS!
  mainProvider: ID @index(name: "byProvider")
  requestOwner: ID! @index(name: "byUser")
  paymentID: String
  price: Int
  Tip: Int
}

type Provider @model @auth(rules: [{allow: public}]) {
  id: ID!
  subID: String!
  firstName: String!
  lastName: String!
  email: AWSEmail!
  phoneNumber: AWSPhone!
  dateOfBirth: AWSDate!
  address: String!
  city: String!
  zipCode: String!
  biography: String!
  profilePictureURL: AWSURL
  backgroundCheckStatus: Boolean!
  employeeID: String!
  offenses: Int!
  overallRating: Float!
  jobs: [Job] @hasMany(indexName: "byProvider", fields: ["id"])
}

type User @model @auth(rules: [{allow: public}]) {
  id: ID!
  subID: String!
  firstName: String!
  lastName: String!
  email: AWSEmail!
  phoneNumber: AWSPhone!
  dateOfBirth: AWSDate
  address: [String!]
  contactMethod: String
  jobs: [Job] @hasMany(indexName: "byUser", fields: ["id"])
}

type Code @model @auth(rules: [{allow: public}]) {
  id: ID!
  zipCode: String!
  city: String!
  count: Int!
}
 